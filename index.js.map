{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/refs.js","../src/js/render-functions.js","../src/js/handlers.js","../src/main.js"],"sourcesContent":["\nimport axios from \"axios\";\nconst APIkey = \"52837219-31e3d366b905b38697491d842\";\naxios.defaults.baseURL = 'https://pixabay.com';\nexport async function getImagesByQuery(query,page) {\n    try\n   {const response = await axios.get(\"/api/\",{params:{\n        key: APIkey,\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n       safesearch: true,\n       page,\n       per_page: 15,   \n   }   \n   })\n        console.log(response.data);\n        \n    return response.data    \n    }\n    catch (error) {\n    console.log(error.message);\n}\n}\n","export const refs = {\n  formEl: document.querySelector('.form'),\n  galleryEl: document.querySelector('.gallery'),\n  loaderEl: document.querySelector('.loader'),\n  loadMoreButton: document.querySelector('.load-more-button')\n};","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport { refs } from \"./refs\";\nlet galleryLightBox;\nexport function createGallery(images) {\n    let markup = \"\";\n    for (const image of images) {\n        markup +=`<li class=\"gallery-item\">\n            <a class=\"gallery-link\" href=\"${image.largeImageURL}\">\n                <img class=\"gallery-image\" src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            </a>\n            <ul class=\"image-stats-list\">\n                <li class=\"image-stats-item\">\n                    <h3 class=\"image-stats-title\">Likes</h3>\n                    <p class=\"image-stats\">${image.likes}</p>\n                </li>\n                <li class=\"image-stats-item\">\n                    <h3 class=\"image-stats-title\">Views</h3>\n                    <p class=\"image-stats\">${image.views}</p>\n                </li>\n                <li class=\"image-stats-item\">\n                    <h3 class=\"image-stats-title\">Comments</h3>\n                    <p class=\"image-stats\">${image.comments}</p>\n                </li>\n                <li class=\"image-stats-item\">\n                    <h3 class=\"image-stats-title\">Downloads</h3>\n                    <p class=\"image-stats\">${image.downloads}</p>\n                </li>\n            </ul>\n        </li>`  \n    }\n    refs.galleryEl.insertAdjacentHTML(\"beforeend\", markup)\n    \n    if (!galleryLightBox) {\n    galleryLightBox = new SimpleLightbox('.gallery a', {\n      animationSpeed: 300,\n      fadeSpeed: 250,\n      captions: true,\n      captionDelay: 250,\n      captionType: 'attr',\n      captionsData: 'alt',\n      captionPosition: 'bottom',\n      showCounter: true,\n      scrollZoom: true,\n    });\n  } else {\n    galleryLightBox.refresh();\n  }\n}\n\nexport function clearGallery() { \n refs.galleryEl.innerHTML=\"\"   \n} \n\nexport function showLoader(){\n    if (refs.loaderEl.classList.contains(\"visually-hidden\")) {\n        refs.loaderEl.classList.remove(\"visually-hidden\")\n    }\n    \n}\n\nexport function hideLoader() {\nif (!refs.loaderEl.classList.contains(\"visually-hidden\")) {\n        refs.loaderEl.classList.add(\"visually-hidden\")\n    }\n}\n\nexport function showLoadMoreButton() {\n   if (refs.loadMoreButton.classList.contains(\"visually-hidden\")) {\n        refs.loadMoreButton.classList.remove(\"visually-hidden\")\n    } \n }\n\nexport function hideLoadMoreButton() {\nif (!refs.loadMoreButton.classList.contains(\"visually-hidden\")) {\n        refs.loadMoreButton.classList.add(\"visually-hidden\")\n    } \n}","\nimport iziToast from \"izitoast\"\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport { getImagesByQuery } from \"./pixabay-api\"\nimport { clearGallery, createGallery, hideLoader, hideLoadMoreButton, showLoader, showLoadMoreButton } from \"./render-functions\";\nimport { refs } from \"./refs\";\nlet page = 1;\nlet totalPages;\nlet currentUserInput = \"\";\n\nexport async function handleSubmit(event) {\n  event.preventDefault() \n  hideLoadMoreButton()\n    const userInput = event.target.elements[0].value.trim()\n    if (userInput === \"\") {\n       iziToast.error({\n            message: 'Please write something',\n            position: 'topRight', \n    })\n    }\nclearGallery()\n  showLoader()\n  currentUserInput = \"\"\n  page = 1\n  try {\n    currentUserInput = userInput\n    const data = await getImagesByQuery(userInput, page)\n    \n         if (!data.hits || data.hits.length === 0) {\n           hideLoader()\n           hideLoadMoreButton()\n           iziToast.error({\n        message: `Houston, we have a problem.`,\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#ffffff',\n           });\n           return\n    }\n    totalPages = Math.ceil(data.totalHits / 15);\n    createGallery(data.hits) \n    hideLoader()\n    if (page !== totalPages ) {\n     showLoadMoreButton()\n    }\n    else {\n    iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n    });\n      hideLoadMoreButton()\n    }\n  }\n  catch (error){\n    hideLoader();\n    hideLoadMoreButton()\n      iziToast.error({\n        message: `Houston, we have a problem.`,\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#ffffff',\n      });\n     }\n}\n\nexport async function handleLoadMore() {\n  page++;\n  showLoader()\n  try {\n    const data = await getImagesByQuery(currentUserInput, page)\n    totalPages = Math.ceil(data.totalHits / 15);\n    createGallery(data.hits)\n\n     let galleryItemSize = refs.galleryEl.firstElementChild.getBoundingClientRect();\n\n    window.scrollBy({\n      top: galleryItemSize.height * 1.75,\n      behavior: \"smooth\",\n    });\n\n    hideLoader()\n\n    if (page !== totalPages) {\n      showLoadMoreButton()\n    }\n    else {\n      iziToast.info({\n        message: `We're sorry, but you've reached the end of search results.`,\n        position: 'topRight',\n      });\n      hideLoadMoreButton()\n    }\n  }\n  catch (error){\n    hideLoader();\n    hideLoadMoreButton()\n      iziToast.error({\n        message: `Houston, we have a problem.`,\n        position: 'topRight',\n        backgroundColor: '#ef4040',\n        messageColor: '#ffffff',\n      });\n    console.log(error.message);\n    \n     }\n}\n","\nimport { handleLoadMore, handleSubmit } from \"./js/handlers\";\nimport { refs } from \"./js/refs\";\nimport { hideLoader } from \"./js/render-functions\";\nhideLoader()\nrefs.formEl.addEventListener(\"submit\", handleSubmit);\nrefs.loadMoreButton.addEventListener(\"click\", handleLoadMore);"],"names":["APIkey","axios","getImagesByQuery","query","page","response","error","refs","galleryLightBox","createGallery","images","markup","image","SimpleLightbox","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","totalPages","currentUserInput","handleSubmit","event","userInput","iziToast","data","handleLoadMore","galleryItemSize"],"mappings":"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"}